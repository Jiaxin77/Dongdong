webpackJsonp([10],{"9IRF":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Gu7T"),r=a.n(n),i=a("/MpH"),s={data:function(){return{id:localStorage.getItem("userId"),loading:!1,loadingMore:!1,showLoadingMore:!0,enterName:"全部",needsPayStatus:"全部",orderList:[],filterList:[]}},created:function(){this.$parent.showSiderMenu=!0,this.$parent.showMenu=!1},computed:{list:function(){},paginationProps:function(){return{pageSize:6,total:this.data.length}},data:function(){var t=this,e=[].concat(r()(this.orderList));return"待支付"===this.needsPayStatus?e=e.filter(function(t){return"待支付"==t.needsPayStatus}):"交易成功"===this.needsPayStatus&&(e=e.filter(function(t){return"交易成功"==t.needsPayStatus})),"全部"!=this.enterName&&(e=e.filter(function(e){return e.enterName==t.enterName})),e}},mounted:function(){this.getOrdersList()},methods:{machineStatusStyleAvatar:function(t){return"待支付"==t?{"background-color":"#CF9137"}:"交易成功"==t?{"background-color":"#206648"}:void 0},machineStatusStyle:function(t){return"待支付"==t?{color:"#D39846"}:"交易成功"==t?{color:"#206648"}:void 0},handleTypeChange:function(t){this.needsPayStatus=t},handleEnterNameChange:function(t){this.enterName=t},getOrdersList:function(){var t=this;Object(i.f)().then(function(e){t.orderList=e.data.data,console.log(t.orderList)}).catch(function(t){console.log(t)})},onSearch:function(){},getDemandDetail:function(t){this.$router.push({name:"ManOrderDetail",query:{id:t}})},exportExcel:function(){var t=this;a.e(24).then(a.bind(null,"BNCD")).then(function(e){var a=(t.orderList||[]).map(function(t,e){return{id:t.id,enterName:t.enterName,needDes:t.needDes,needsFarmerType:t.needsFarmerType,needsPayStatus:t.needsPayStatus,orderNum:t.orderNum,orderMoney:t.orderMoney,orderMoneyToFarmers:t.orderMoneyToFarmers}});if(a){var n=t.formatJson(["id","enterName","needDes","needsFarmerType","needsPayStatus","orderNum","orderMoney","orderMoneyToFarmers"],a);e.export_json_to_excel(["编号","企业名称","需求名称","工种","支付状态","订单数量","订单金额(支付给农民工)","订单总额(包含平台服务费))"],n,t.needsPayStatus+"订单信息")}else alert("暂无无数据")})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{staticStyle:{"min-width":"1400px"},attrs:{type:"flex",justify:"end"}},[a("a-col",{staticStyle:{width:"85%"}},[a("div",[a("div",{staticClass:"mlist-control ant-list-bordered"},[a("div",{staticClass:"list-control-finish",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center",height:"100%",width:"95%"}},[a("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"选择企业"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"default-value":"全部",value:t.enterName},on:{change:t.handleEnterNameChange}},[a("a-select-option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),t._l(t.orderList,function(e){return a("a-select-option",{key:e,attrs:{value:e.enterName}},[t._v(t._s(e.enterName))])})],2)],1),t._v(" "),a("a-form-item",{attrs:{label:"订单状态"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"default-value":"全部",value:t.needsPayStatus},on:{change:t.handleTypeChange}},[a("a-select-option",{attrs:{value:"全部"}},[t._v("全部")]),t._v(" "),a("a-select-option",{attrs:{value:"待支付"}},[t._v("待支付")]),t._v(" "),a("a-select-option",{attrs:{value:"交易成功"}},[t._v("交易成功")])],1)],1)],1),t._v(" "),a("a-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("下载当前订单")])],1)]),t._v(" "),a("a-list",{staticClass:"listpage",style:{backgroundImage:"url("+t.img+")",backgroundRepeat:t.no-t.repeat,center:t.center,top:t.top,backgroundSize:"100% 100%"},attrs:{bordered:!0,pagination:t.paginationProps,loading:t.loading,itemLayout:"horizontal",dataSource:t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-button",{attrs:{slot:"actions",type:"primary"},on:{click:function(a){return t.getDemandDetail(e.id)}},slot:"actions"},[t._v("查看")]),t._v(" "),a("a-list-item-meta",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.needsFarmerType)+" 工种")]),t._v(" "),a("a-avatar",{staticStyle:{width:"50px",height:"50px","padding-top":"25px"},style:t.machineStatusStyleAvatar(e.needsPayStatus),attrs:{slot:"avatar",shape:"square"},slot:"avatar"})],1),t._v(" "),a("span",{staticClass:"ant-list-item-meta-description",staticStyle:{width:"100px","margin-right":"20px",display:"inline-block","align-self":"center"}},[t._v("\n            "+t._s(e.enterName)+"\n          ")]),t._v(" "),a("span",{staticClass:"ant-list-item-meta-description",staticStyle:{width:"60px","margin-right":"50px"}},[t._v("\n            订单数量\n            "),a("br"),t._v("\n            "+t._s(e.orderNum)+"\n          ")]),t._v(" "),a("span",{staticClass:"ant-list-item-meta-description",staticStyle:{width:"100px","margin-right":"50px"}},[t._v("\n            订单金额\n            "),a("br"),t._v("\n            "+t._s(e.orderMoneyToFarmers)+"\n          ")]),t._v(" "),a("span",{staticClass:"ant-list-item-meta-description",staticStyle:{width:"100px","margin-right":"50px"}},[t._v("\n            订单总额\n            "),a("br"),t._v("\n            "+t._s(e.orderMoney)+"\n          ")]),t._v(" "),a("span",{staticClass:"ant-list-item-meta-description",staticStyle:{display:"inline-block",width:"100px","align-self":"center"},style:t.machineStatusStyle(e.needsPayStatus)},[t._v(t._s(e.needsPayStatus))])],1)}}])},[t._v(" "),a("br")]),t._v(" "),a("a-layout-footer",{staticStyle:{textAlign:"center"}},[t._v("DDDB ©2019 Created by 六芒星")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("VVae")},"data-v-b039a61c",null);e.default=l.exports},VVae:function(t,e){}});
//# sourceMappingURL=10.a27355d766517a3cbcfe.js.map