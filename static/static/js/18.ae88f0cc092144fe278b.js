webpackJsonp([18],{HVCf:function(t,e){},m3DF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),r=i.n(n),a=i("/MpH"),s=i("dB2d"),o={components:{},data:function(){return{isPassed:!0,previewVisible:!1,previewImage:"",imgUrl:s.a.baseURL,entId:Number(this.$route.query.id),entInfo:{},entAuthState:"",form:this.$form.createForm(this)}},computed:{requiredData:function(){for(var t=[{name:"营业执照",link:this.entInfo.businessLicense,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.businessLicense},{name:"建筑资质",link:this.entInfo.constructionQUAL,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.constructionQUAL},{name:"安全生产许可证",link:this.entInfo.securityLicense,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.securityLicense},{name:"社保缴费证明",link:this.entInfo.socialSecurityCert,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.socialSecurityCert},{name:"拟用工项目中标通知书或其他文件",link:this.entInfo.noticeOfBid,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.noticeOfBid},{name:"项目商业保险",link:this.entInfo.businessItemInsurance,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.businessItemInsurance},{name:"无纳税异常声明",link:this.entInfo.noTaxExpStatement,sourceType:"",otherFileSource:"",imgSource:this.imgUrl+this.entInfo.noTaxExpStatement}],e=0;e<t.length;e++){var i=t[e];if(null==i.link)i.imgSource="static/D-qualification-cardbg.png",i.sourceType="pic";else if(null!=i.link){-1!=i.link.toString().indexOf(".pdf")?(i.otherFileSource=this.imgUrl+i.link,i.imgSource="static/D-qualification-uploaded.jpeg",i.sourceType="other"):i.imgSource=this.imgUrl+i.link}}return t},selectedData:function(){for(var t=[{name:"土地使用证",link:this.entInfo.landUseCert,imgSource:this.imgUrl+this.entInfo.landUseCert},{name:"规划许可证",link:this.entInfo.planningPermit,imgSource:this.imgUrl+this.entInfo.planningPermit},{name:"施工许可证",link:this.entInfo.constructionPermit,imgSource:this.imgUrl+this.entInfo.constructionPermit},{name:"开工报告",link:this.entInfo.startReport,imgSource:this.imgUrl+this.entInfo.startReport}],e=0;e<t.length;e++){var i=t[e],n=toString(i.link);null==i.link?i.imgSource="static/D-qualification-cardbg.png":null!=i.link&&(-1!=n.indexOf(".pdf")?i.imgSource="static/D-qualification-cardbg.png":i.imgSource=this.imgUrl+i.link)}return t}},mounted:function(){this.getEnterpriseInfoById()},created:function(){this.$parent.showSiderMenu=!0,this.$parent.showMenu=!1},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(t,e,i){"other"===t?window.open(i):(this.previewImage=e,this.previewVisible=!0)},postAuthResult:function(t){var e=this;(0,this.form.validateFields)(function(i,n){if(!i){"已通过"===t&&void 0===n.authAdvice&&(n.authAdvice=""),"未通过"===t&&void 0===n.authAdvice&&e.error();var s=r()({},n,{id:e.entId,authState:t}),o=e;Object(a.j)(s).then(function(t){25===t.data.result&&(alert("审核成功"),o.$router.push({path:"/entlist"}))}).catch(function(t){console.log(t)})}})},getEnterpriseInfoById:function(){var t=this;Object(a.g)(this.entId).then(function(e){t.entInfo=e.data.data,t.entAuthState=e.data.data.authState,t.thisimgSource=e.data.data.businessLicense}).catch(function(t){console.log(t)})},isPassedShow:function(){"审核中"===this.entAuthState?this.isPassed=!0:this.isPassed=!1},exportExcel:function(){var t=this;i.e(24).then(i.bind(null,"BNCD")).then(function(e){var i=(t.entProfileInfo||[]).map(function(e,i){return{id:e.id,enterName:e.enterName,businessLicense:t.imgUrl+e.businessLicense,constructionQUAL:t.imgUrl+e.constructionQUAL,securityLicense:t.imgUrl+e.securityLicense,socialSecurityCert:t.imgUrl+e.socialSecurityCert,noticeOfBid:t.imgUrl+e.noticeOfBid,businessItemInsurance:t.imgUrl+e.businessItemInsurance,noTaxExpStatement:t.imgUrl+e.noTaxExpStatement,planningPermit:t.imgUrl+e.planningPermit,constructionPermit:t.imgUrl+e.constructionPermit,landUseCert:t.imgUrl+e.landUseCert,startReport:t.imgUrl+e.startReport}});if(i){var n=t.formatJson(["id","enterName","businessLicense","constructionQUAL","securityLicense","socialSecurityCert","noticeOfBid","businessItemInsurance","noTaxExpStatement","planningPermit","constructionPermit","landUseCert","startReport"],i);e.export_json_to_excel(["企业ID","企业名称","营业执照","建筑资质","安全生产许可证","社保缴费证明","拟用工项目中标通知书或其他文件","项目商业保险","无纳税异常声明","规划许可证","施工许可证","土地使用证","开工报告"],n,t.entInfo.enterName+"的企业资质")}else alert("暂无无数据")})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},error:function(){this.$error({title:"请输入反馈意见",content:"驳回企业审核信息时需要输入反馈意见"})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-row",{staticStyle:{"min-width":"1400px"},attrs:{type:"flex",justify:"end"}},[n("a-col",{staticStyle:{width:"85%"}},[n("div",{style:{background:"#fff",padding:"24px",minHeight:"280px"}},[n("a-row",{attrs:{gutter:24,type:"flex",justify:"center"}},[n("a-col",{attrs:{span:3}},[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"account-center-avatarHolder"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:i("XMue")}})])])])],1),t._v(" "),n("a-col",{attrs:{span:17}},[n("a-form",{attrs:{id:"components-form-demo-validate-other",form:t.form}},[n("a-form-item",{attrs:{label:"用户名",labelCol:{span:6},wrapperCol:{span:14}}},[n("span",{staticClass:"ant-form-text"},[t._v(t._s(t.entInfo.enterName))])]),t._v(" "),n("a-form-item",{attrs:{label:"在建工程名称",labelCol:{span:6},wrapperCol:{span:14}}},[n("span",{staticClass:"ant-form-text"},[t._v(t._s(t.entInfo.nowProject))])]),t._v(" "),n("a-form-item",{attrs:{label:"经营范围",labelCol:{span:6},wrapperCol:{span:14}}},[n("span",{staticClass:"ant-form-text"},[t._v(t._s(t.entInfo.scope))])]),t._v(" "),n("a-form-item",{attrs:{label:"企业介绍",labelCol:{span:6},wrapperCol:{span:14}}},[n("p",{staticClass:"ant-form-text"},[t._v(t._s(t.entInfo.enterDes))])])],1)],1)],1),t._v(" "),n("a-divider"),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{span:3}},[n("h2",[t._v("企业资质信息")])]),t._v(" "),n("a-col",{attrs:{span:3,offset:"12"}})],1),t._v(" "),n("a-divider",[n("h3",{staticStyle:{width:"124px","line-height":"40px",color:"white",height:"42px",background:"rgba(184,12,10,1)","box-shadow":"0px 2px 20px 0px rgba(171,171,171,0.5)","border-radius":"21px"}},[t._v("\n            必填\n          ")])]),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"start"}},[n("a-col",{attrs:{span:6,offset:"3"}},[n("h2",[t._v("企业名称:"+t._s(t.entInfo.enterName))])])],1),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{span:18}},[n("div",{ref:"content",staticClass:"card-list"},[n("a-list",{attrs:{rowKey:"id",grid:{gutter:96,column:3},dataSource:t.requiredData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{},[[n("a-card",{attrs:{hoverable:!0},on:{click:function(i){return t.handlePreview(e.sourceType,e.imgSource,e.otherFileSource)}}},[n("img",{attrs:{slot:"cover",alt:"example",src:e.imgSource},slot:"cover"}),t._v(" "),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a",[t._v(t._s(e.name))])])],2)]],2)}}])})],1)])],1),t._v(" "),n("a-divider",[n("h3",{staticStyle:{width:"124px","line-height":"40px",color:"white",height:"42px",background:"rgba(184,12,10,1)","box-shadow":"0px 2px 20px 0px rgba(171,171,171,0.5)","border-radius":"21px"}},[t._v("\n            选填\n          ")])]),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{span:18}},[n("div",{ref:"content",staticClass:"card-list"},[n("a-list",{attrs:{rowKey:"id",grid:{gutter:96,column:3},dataSource:t.selectedData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{},[[n("a-card",{staticStyle:{position:"relative"},attrs:{hoverable:!0},on:{click:function(i){return t.handlePreview(e.sourceType,e.imgSource,e.otherFileSource)}}},[n("img",{attrs:{slot:"cover",alt:e.name,src:e.imgSource},slot:"cover"}),t._v(" "),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a",[t._v(t._s(e.name))])])],2)]],2)}}])}),t._v(" "),n("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1),t._v(" "),n("a-layout-footer",{staticStyle:{textAlign:"center"}},[t._v("DDDB ©2019 Created by 六芒星")])],1),t._v(" "),t.isPassed?n("a-affix",{attrs:{offsetBottom:0}},[n("div",{staticClass:"affix-bottom"},[n("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.handleSubmit}},[n("a-form-item",{attrs:{label:"反馈意见"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["authAdvice",{rules:[{required:!1,message:"请输入需求名称"}]}],expression:"[\n            'authAdvice',\n            {rules: [{ required: false, message: '请输入需求名称' }]}\n          ]"}],staticStyle:{width:"500%"},attrs:{placeholder:"请输入反馈意见",name:"authAdvice"}})],1),t._v(" "),n("a-form-item",{staticStyle:{"text-align":"center","margin-left":"700px"}},[n("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:function(e){return t.postAuthResult("未通过")}}},[t._v("驳回")])],1),t._v(" "),n("a-form-item",{staticStyle:{"text-align":"center"}},[n("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:function(e){return t.postAuthResult("已通过")}}},[t._v("通过")])],1)],1)],1)]):t._e()],1)],1)},staticRenderFns:[]};var l=i("VU/8")(o,c,!1,function(t){i("HVCf")},"data-v-231f4252",null);e.default=l.exports}});
//# sourceMappingURL=18.ae88f0cc092144fe278b.js.map